{% extends "frontend/index.html" %} {% block content %}

<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

<h1>Event Graph (This Month)</h1>
<canvas id="eventCountChart"></canvas>

<script>
  const ctx = document.getElementById('eventCountChart').getContext('2d')
  var day_wise_counts = `{{ day_wise_counts|safe }}` // Parse JSON from context
  const eventCountChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(day_wise_counts).map(Number), // Convert keys to numbers for labels
      datasets: [
        {
          label: 'Event Count',
          data: Object.values(day_wise_counts),
          backgroundColor: [
            'rgba(255, 99, 132, 0.8)',
            'rgba(54, 162, 235, 0.8)',
            'rgba(255, 206, 86, 0.8)',
            'rgba(75, 192, 192, 0.8)',
            'rgba(153, 102, 255, 0.8)',
          ],
          borderColor: [
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
          ],
          borderWidth: 1,
        },
      ],
    },
    options: {
      scales: {
        x: {
          title: 'Day of Month', // Optional: Add title for x-axis
        },
        y: [
          {
            ticks: {
              beginAtZero: true,
            },
          },
        ],
      },
    },
  })
</script>
{% endblock %}
